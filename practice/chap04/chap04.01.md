```sql
-- 既にデータベースがある場合はいったん削除、ない場合はエラー
drop database `chap04`;

-- データベース作成（文字コードはUTF8MB4で日本語対応）
CREATE DATABASE `chap04` CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

-- 使用するデータベースを指定
USE `chap04`;

-- 注文履歴テーブル作成
CREATE TABLE 注文履歴 (
  日付 DATE,
  注文番号 INTEGER,
  注文枝番 INTEGER,
  商品名 VARCHAR(50),
  分類 CHAR(1),         -- 1: ドリンク, 2: フード, 3: その他
  サイズ CHAR(1),       -- S, M, L (ドリンクのみ), X (ドリンク以外)
  単価 INTEGER,
  数量 INTEGER,
  注文金額 INTEGER,
  PRIMARY KEY (注文番号, 注文枝番)
);

--- 注文履歴テーブルにデータを追加
INSERT INTO 注文履歴 (日付, 注文番号, 注文枝番, 商品名, 分類, サイズ, 単価, 数量, 注文金額) VALUES
('2024-05-01', 1000, 1, 'チーズバーガー', '2', 'X', 450, 1, 450),
('2024-05-01', 1000, 2, 'おもちゃ', '3', 'X', 200, 3, 600),
('2024-05-02', 1001, 1, 'ホットコーヒー', '1', 'L', 350, 1, 350),
('2024-05-02', 1001, 2, 'ナゲット', '2', 'X', 450, 3, 1350),
('2024-05-28', 1002, 1, '紅茶', '1', 'M', 300, 2, 600),
('2024-05-28', 1002, 2, 'アイスコーヒー', '1', 'L', 350, 2, 700),
('2024-05-05', 1003, 1, 'ホットコーヒー', '1', 'L', 350, 2, 700),
('2024-05-05', 1003, 2, 'アップルパイ', '2', 'X', 450, 2, 900),
('2024-05-14', 1004, 1, 'おもちゃ', '3', 'X', 200, 2, 400),
('2024-05-14', 1004, 2, '紅茶', '1', 'L', 350, 3, 1050),
('2024-05-07', 1005, 1, 'グリーンサラダ', '2', 'X', 450, 3, 1350),
('2024-05-07', 1005, 2, 'アイスコーヒー', '1', 'L', 350, 1, 350),
('2024-05-20', 1006, 1, '紅茶', '1', 'M', 300, 1, 300),
('2024-05-20', 1006, 2, 'アップルパイ', '2', 'X', 450, 3, 1350),
('2024-05-20', 1007, 1, 'おもちゃ', '3', 'X', 200, 2, 400),
('2024-05-20', 1007, 2, 'アイスコーヒー', '1', 'M', 300, 1, 300),
('2024-05-08', 1008, 1, 'アップルパイ', '2', 'X', 450, 2, 900),
('2024-05-08', 1008, 2, 'グリーンサラダ', '2', 'X', 450, 1, 450),
('2024-05-23', 1009, 1, 'グリーンサラダ', '2', 'X', 450, 1, 450),
('2024-05-23', 1009, 2, '紅茶', '1', 'L', 350, 1, 350),
('2024-05-01', 1010, 1, 'おもちゃ', '3', 'X', 200, 5, 1000),
('2024-06-01', 1011, 1, 'チーズバーガー', '2', 'X', 450, 1, 450),
('2024-06-01', 1011, 2, 'ホットコーヒー', '1', 'L', 350, 3, 1050),
('2024-06-17', 1012, 1, 'ホットコーヒー', '1', 'L', 350, 1, 350),
('2024-06-17', 1012, 2, 'ホットコーヒー', '1', 'L', 350, 3, 1050),
('2024-06-11', 1013, 1, '紅茶', '1', 'S', 250, 2, 500),
('2024-06-11', 1013, 2, 'おもちゃ', '3', 'X', 200, 2, 400),
('2024-06-30', 1014, 1, 'ホットコーヒー', '1', 'L', 350, 1, 350),
('2024-06-30', 1014, 2, 'ナゲット', '2', 'X', 450, 3, 1350),
('2024-06-25', 1015, 1, '紅茶', '1', 'S', 250, 3, 750),
('2024-06-25', 1015, 2, '紅茶', '1', 'S', 250, 3, 750),
('2024-06-14', 1016, 1, 'ナゲット', '2', 'X', 450, 1, 450),
('2024-06-14', 1016, 2, '紅茶', '1', 'S', 250, 2, 500),
('2024-06-30', 1017, 1, '紅茶', '1', 'S', 250, 3, 750),
('2024-06-30', 1017, 2, 'アイスコーヒー', '1', 'M', 300, 2, 600),
('2024-06-14', 1018, 1, 'アイスコーヒー', '1', 'M', 300, 3, 900),
('2024-06-14', 1018, 2, 'アップルパイ', '2', 'X', 450, 1, 450),
('2024-06-12', 1019, 1, '紅茶', '1', 'S', 250, 2, 500),
('2024-06-12', 1019, 2, 'グリーンサラダ', '2', 'X', 450, 2, 900),
('2024-06-18', 1020, 1, '紅茶', '1', 'S', 250, 2, 500),
('2024-06-18', 1020, 2, 'チーズバーガー', '2', 'X', 450, 2, 900)
;

--- 注文履歴テーブルのデータの確認
select * from 注文履歴;

```

## 問題

「chap04」データベースの「注文履歴」テーブルについて、以下の操作を行う、SQL 文を記述してください

### 問題１

注文順かつその明細順に、すべての注文データを取得する。

### 問題２

2024 年 5 月 1 日から 2024 年 5 月 15 日の期間に注文のあった商品名の一覧を商品名順に取得する。

### 問題３

ドリンクの商品について、注文番号、注文枝番、注文金額を取得する。ただし、注文金額の低いほうから 2 ～ 4 番目に該当する注文だけを対象とする。

### 問題４

その他の商品について、2 つ以上同時に購入された商品を取得し、日付、商品名、単価、数量、注文金額を購入日順に表示する。ただし、同日に売り上げたものは、数量の多い順に表示する。

### 問題５

商品の分類ごとに、分類、商品名、サイズ、単価を 1 つの表として取得する。また、サイズはドリンクの商品についてのみ表示し、分類と商品名の順に並べること。

### 問題６

2024 年 5 月に最も多く注文された商品名とその合計注文数を取得する SQL 文を記述してください。

### 問題７

分類「2」（フード）のうち、注文金額が 1000 円を超える明細の注文番号、商品名、数量、注文金額を取得する SQL 文を記述してください。

### 問題８

1 回の注文（注文番号ごと）の合計金額が 2000 円を超える注文の、注文番号と合計金額を取得する SQL 文を記述してください。

### 問題９

「サイズ」が「L」のドリンク商品（分類 1）について、日付ごとに売り上げた合計金額を日付順に取得する SQL 文を記述してください。

### 問題１０

「注文履歴」テーブルの全レコードから、商品名が「コーヒー」で終わる商品の注文データを取得する SQL 文を記述してください。
