```sql
-- 既にデータベースがある場合はいったん削除、ない場合はエラー
-- 使用するデータベースを指定
USE `chap05`;

-- 受注テーブル作成
CREATE TABLE 受注 (
  受注日 DATE,
  受注ID VARCHAR(10) PRIMARY KEY,
  文字 VARCHAR(100),
  文字数 INTEGER,
  書体コード VARCHAR(10)
);


---  受注テーブルにデータを追加
INSERT INTO 受注 (受注日, 受注ID, 文字, 文字数, 書体コード) VALUES
('2023-12-05', '101', 'Satou', NULL, '2'),
('2023-12-05', '102', '鈴木 一郎', NULL, '3'),
('2023-12-05', '113', '横浜 BASEBALL CLUB', NULL, '1'),
('2023-12-08', '140', 'N.R.', NULL, NULL);


--- 受注テーブルのデータの確認
SELECT * FROM 受注;

```

## 問題

「chap05」データベースの「受注」テーブルについて、以下の操作を行う、SQL 文を記述してください  
  
ある会社では、依頼された品物に刺繍で文字を入れるサービスを行っています。加工にかかる金額は、1文字ごとに設定された金額を文字数で乗算したもので、1文字ごとの金額は刺繍する書体の種類に応じて決まります。また、10文字を超える場合は、一律500円の特別加工料が加算されます。  
次に、書体ごとの単価を示します。

#### 書体と単価
- 書体コード1：ブロック体　単価100円
- 書体コード2：筆記体　　　単価150円
- 書体コード3：草書体　　　単価200円

※ 受注時に書体が指定されなかった場合は、書体コードにはNULLが指定されるが、ブロック体による加工が適用される。  
これらをもとに、以下の設問で指示されたSQL文を作成してください。  
なお、受注日列はDATE型、受注ID、文字、書体コード列はVARCHAR型、文字数列はINTEGER型で定義されています。

### 問題１

依頼された文字は、何文字の刺繍が必要かを求める。「文字」列のデータをもとに、1つのSQL文で「文字数」列の全行を更新する。ただし、「文字」列には半角の空白が入る可能性があるが、空白は文字数に含めない。なお、使用するDBMSでは、文字列長を得る関数はバイト数ではなく文字数を返すものとする。

### 問題２

受注内容を一覧表示する。一覧には、受注日、受注ID、文字数、書体名、単価、特別加工料を載せ、受注日および受注ID順に表示したい。ただし、特別加工料がかからないものについては、特別加工料をゼロとする。

### 問題３

受注IDが102、113の注文に対して、文字の一部を変更したいという依頼があった。登録されている文字を次の依頼内容に合わせて更新する。  
依頼内容：半角スペースを「★」に変更

---

「rpg」データベースの「パーティー」、「イベント」、「経験イベント」テーブルについて、以下の操作を行う、SQL 文を記述してください

### 問題４

パーティーテーブルから、次の形式の結果表を取得する。

- 職業区分
- 職業コード
- ID
- 名称

職業区分は、物理攻撃の得意なもの（職業コードが1から始まる）を「S」、魔法攻撃の得意なもの（職業コードが2から始まる）を「M」、それ以外を「A」と表示すること。また、職業コード順とすること。

### 問題５

アイテム「勇気の鈴」を装備すると、HPが50ポイントアップする。このアイテムを装備したときの各キャラクターのHPを適切な列を用いて次の別名で取得する。ただし、このアイテムは「武道家」と「学者」しか装備できない。

- なまえ
- 現在のHP
- 装備後のHP

### 問題６

ID「A01」と「A03」のキャラクターがアイテム「知恵の指輪」を装備し、MPが20ポイントアップした。その該当データのMPを更新する。

### 問題７

武道家の技「スッキリパンチ」は、自分のHPを2倍したポイントのダメージを敵に与える。この技を使ったときのダメージを適切な列を用いて次の別名で抽出する。

- なまえ
- 現在のHP
- 予想されるダメージ

### 問題８

現在、主人公のパーティーにいるキャラクターの状況について、適切な列を用いて次の別名で取得する。

- なまえ
- HPとMP
- ステータス

「HPとMP」はHPとMPを「／」でつなげたものとする。ステータスには状態コードを日本語で置き換えたものを表示するが、ステータスに異常がない場合は、何も表示しない。

### 問題９

イベントテーブルから、次の形式の結果表を取得する。

- イベント番号
- イベント名称
- タイプ
- 発生時期

タイプは日本語で置き換え、発生時期は次の条件に応じて表示する。

- イベント番号が1〜10なら「序盤」
- イベント番号が11〜17なら「中盤」
- 上記以外なら「終盤」

### 問題１０

敵の攻撃「ネームバリュー」は、名前の文字数を10倍したポイントのダメージがある。この攻撃を受けたときの各キャラクターの予想ダメージを適切な列を用いて次の別名で取得する。

- なまえ
- 現在のHP
- 予想ダメージ