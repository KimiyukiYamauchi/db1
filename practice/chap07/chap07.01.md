```sql
-- 既にデータベースがある場合はいったん削除
drop database if exists `chap07`;

-- データベース作成（文字コードはUTF8MB4で日本語対応）
CREATE DATABASE `chap07` CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

-- 使用するデータベースを指定
USE `chap07`;

-- 料金テーブル作成
CREATE TABLE 料金 (
  車種コード CHAR(3) PRIMARY KEY,
  車種名 VARCHAR(20),
  価格 INTEGER
);

--- 料金テーブルにデータを追加
INSERT INTO 料金 (車種コード, 車種名, 価格) VALUES
('S01', '軽自動車', 5250),
('S02', 'ハッチバック', 5775),
('S03', 'セダン', 8400),
('E01', 'エコカー', 8400),
('E02', 'エコカーＳ', 8715);

--- 料金テーブルのデータの確認
select * from 料金;

-- レンタルテーブル作成
CREATE TABLE レンタル (
  レンタルID CHAR(4) PRIMARY KEY,
  車種コード CHAR(3),
  レンタル日数 INTEGER
);

--- レンタルテーブルにデータを追加
INSERT INTO レンタル (レンタルID, 車種コード, レンタル日数) VALUES
('1001', 'S02', 1),
('1002', 'S01', 3),
('1201', 'E01', 2),
('1202', 'S02', 5),
('1510', 'E01', 1),
('1511', 'S02', 2);

--- レンタルテーブルのデータの確認
select * from レンタル;

```

## 問題

「chap07」データベースの「料金」テーブル(各車の1日あたりのレンタル料)、「レンタル」テーブル（各車のレンタルの実績）について、以下の操作を行う、SQL 文を記述してください  
  

### 問題１

車種コード「S02」「ハッチバック」の合計のレンタル金額を求めてください。列名は合計金額。

### 問題２

レンタル日数が2日以上の車種コードと車種名。列名は車種コード、車種名。重複は排除すること。

### 問題３

トータルのレンタル日数と車種数。列名は合計日数、車種数。  
副問合せで、車種コードごとのレンタル日数の合計を求め、これを仮想表として利用する


---

「rpg」データベースの「パーティー」、「イベント」、「経験イベント」テーブルについて、以下の操作を行う、SQL 文を記述してください

### 問題４

勇者の現在の HP が、パーティー全員の HP の何％に当たるかを求めたい。適切な列を用いて次の列名で抽出する。ただし、割合は小数点第２位を四捨五入し、小数点第１位まで求めること。

- なまえ
- 現在のHP
- パーティーでの割合

### 問題５

魔法使いは回復魔法「みんなならお裾分け」を使って MP を回復した。この魔法は、本人を除くパーティー全員の MP 合計値の10％をもらうことができる。端数は四捨五入して魔法使いの MP を更新する。なお、魔法使い以外の MP は更新しなくてよいものとする。

### 問題６

経験イベントテーブルから、これまでにクリアしたイベントのうち、タイプが「強制」または「特殊」であるものについて、副問い合わせを用いて次の列名で抽出する。

- イベント番号
- クリア結果


### 問題７

パーティーテーブルから、パーティー内で最も高い MP を持つキャラクター名とその MP を副問い合わせを用いて抽出する。列名は名称、MP。