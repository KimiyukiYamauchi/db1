## 問題

以下の問題に対するSQL文の模範解答を作成してください。

### 問題1

現在入室中の社員数を取得する。列名は入室中の社員数。

```sql
SELECT COUNT(*) AS 入室中の社員数
FROM 入退室管理
WHERE 退室 IS NULL;
```

#### 正解: 13 / 不正解: 2 / 正解率: 87%

### 問題2

社員ごとの入室回数を、回数の多い順に取得する。列名は社員名、入室回数。

```sql
SELECT 社員名, COUNT(*) AS 入室回数
FROM 入退室管理
GROUP BY 社員名
ORDER BY 入室回数 DESC;
```

#### 正解: 14 / 不正解: 1 / 正解率: 93%

### 問題3

事由区分ごとの入室回数を取得する（事由区分はわかりやすく表示する、以下を参照）。列名は入室事由、入室回数。

```sql
SELECT 
  CASE 事由区分
    WHEN '1' THEN 'メンテナンス'
    WHEN '2' THEN 'リリース作業'
    WHEN '3' THEN '障害対応'
    WHEN '9' THEN 'その他'
  END AS 入室事由,
  COUNT(*) AS 入室回数
FROM 入退室管理
GROUP BY 事由区分;
```

#### 正解: 12 / 不正解: 3 / 正解率: 80%

### 問題4

入室回数が5回を超過する社員について、社員名と入室回数を取得する。列名は社員名、入室回数。

```sql
SELECT 社員名, COUNT(*) AS 入室回数
FROM 入退室管理
GROUP BY 社員名
HAVING COUNT(*) > 5;
```

#### 正解: 15 / 不正解: 0 / 正解率: 100%

### 問題5

これまでに障害対応が発生した日付と、それに対応した社員数を取得する。列名は日付、社員数。

```sql
SELECT 日付, COUNT(DISTINCT 社員名) AS 社員数
FROM 入退室管理
WHERE 事由区分 = '3'
GROUP BY 日付;
```

#### 正解: 12 / 不正解: 3 / 正解率: 80%

### 問題6

現在のパーティーにいるキャラクターの HP と MP について、最大値、最小値、平均値をそれぞれ求める。列名はそれぞれ、HPの最大値、HPの最小値、HPの平均値、MPの最大値、MPの最小値、MPの平均値。

```sql
SELECT 
  MAX(HP) AS HPの最大値,
  MIN(HP) AS HPの最小値,
  AVG(HP) AS HPの平均値,
  MAX(MP) AS MPの最大値,
  MIN(MP) AS MPの最小値,
  AVG(MP) AS MPの平均値
FROM パーティー;
```

#### 正解: 13 / 不正解: 2 / 正解率: 87%

### 問題7

イベントテーブルから、タイプ別にイベントの数を取得する。ただし、タイプは以下を参考に日本語で表示すること。列名はイベント名、イベント数。

```sql
SELECT 
  CASE タイプ
    WHEN '1' THEN '強制'
    WHEN '2' THEN 'フリー'
    WHEN '3' THEN '特殊'
  END AS イベント名,
  COUNT(*) AS イベント数
FROM イベント
GROUP BY タイプ;
```

#### 正解: 8 / 不正解: 7 / 正解率: 53%

### 問題8

経験イベントテーブルから、クリアの結果別にクリアしたイベントの数を取得する。クリア結果順に表示すること。列名はクリア結果、イベント数。

```sql
SELECT クリア結果, COUNT(*) AS イベント数
FROM 経験イベント
WHERE クリア区分 = '1'
GROUP BY クリア結果
ORDER BY クリア結果;
```

#### 正解: 5 / 不正解: 10 / 正解率: 33%

### 問題9

攻撃魔法「小さな奇跡」は、パーティー全員の MP によって敵の行動が異なる。次の条件に従って、現在のパーティーがこの魔法を使ったときの敵の行動を表示する。列名は「敵の行動」。

```sql
SELECT CASE
  WHEN SUM(MP) < 500 THEN '敵は見上げている！'
  WHEN SUM(MP) < 1000 THEN '敵は呆然としている！'
  ELSE '敵はひれ伏している！'
END AS 敵の行動
FROM パーティー;
```

#### 正解: 8 / 不正解: 7 / 正解率: 53%

### 問題10

経験イベントテーブルから、クリアしたイベント数と参加したもののまだクリアしていないイベントの数を次の形式で表示する。

```sql
SELECT 'クリアした' AS 区分, COUNT(*) AS イベント数
FROM 経験イベント
WHERE クリア区分 = '1'
UNION
SELECT '参加したがクリアしていない', COUNT(*)
FROM 経験イベント
WHERE クリア区分 = '0';
```
```sql
SELECT 
  CASE クリア区分 
    WHEN '1' THEN 'クリアした' 
    ELSE '参加したがクリアしていない' 
  END AS 区分,  COUNT(*) AS イベント数
FROM 経験イベント
GROUP BY クリア区分
ORDER BY イベント数 DESC;
```

#### 正解: 8 / 不正解: 7 / 正解率: 53%