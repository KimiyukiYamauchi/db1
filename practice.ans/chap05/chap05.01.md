## 問題

「rpg」データベースの「試験結果」「回答者」テーブルについて、以下の操作を行うSQL文を記述してください

### 問題1

「受験者ID」が「SW1046」の「午後1」にあてはまる点数を計算して登録する。

```sql
UPDATE 試験結果 SET 午後1 = (平均点 * 4 - 午前 - 午後2 - 論述)
WHERE 受験者ID = 'SW1046';
```

#### 正解: 5 / 不正解: 11 / 正解率: 31%

### 問題2

「受験者ID」が「SW1350」の「論述」にあてはまる点数を計算して登録する。

```sql
UPDATE 試験結果 SET 論述 = (平均点 * 4 - 午前 - 午後1 - 午後2)
WHERE 受験者ID = 'SW1350';
```

#### 正解: 5 / 不正解: 11 / 正解率: 31%

### 問題3

「受験者ID」が「SW1877」の「午前」にあてはまる点数を計算して登録する。

```sql
UPDATE 試験結果 SET 午前 = (平均点 * 4 - 午後1 - 午後2 - 論述)
WHERE 受験者ID = 'SW1877';
```

#### 正解: 5 / 不正解: 11 / 正解率: 31%

### 問題4

この試験に合格するには、次の条件をすべて満たす必要がある。

1. 午前の点数は 60 以上であること
2. 午後1と午後2を合計した点数が120以上であること
3. 論述の点数が、午前・午後1・午後2の合計点の3割以上であること

これらの条件をもとに、合格者の受験者IDを抽出する。ただし、列見出しは「合格者ID」とすること。

```sql
SELECT 受験者ID AS 合格者ID
FROM 試験結果
WHERE 午前 >= 60
  AND (午後1 + 午後2) >= 120
  AND 論述 >= ROUND((午前 + 午後1 + 午後2) * 0.3);
```

#### 正解: 15 / 不正解: 1 / 正解率: 94%

### 問題5

メールアドレスの最後の2文字が国コードであることを利用して、国名を登録したい。国コードを日本語の国名に変換のうえ、国名列を更新する。ただし、1つのSQL文で全行を更新すること。
なお、国コードと国名は次のように対応している。
- jp：日本
- uk：イギリス
- cn：中国
- fr：フランス
- vn：ベトナム

```sql
UPDATE 回答者
SET 国名 = CASE
  WHEN メールアドレス LIKE '%.jp' THEN '日本'
  WHEN メールアドレス LIKE '%.uk' THEN 'イギリス'
  WHEN メールアドレス LIKE '%.cn' THEN '中国'
  WHEN メールアドレス LIKE '%.fr' THEN 'フランス'
  WHEN メールアドレス LIKE '%.vn' THEN 'ベトナム'
  ELSE '不明'
END;
```

#### 正解: 14 / 不正解: 2 / 正解率: 88%

### 問題6

メールアドレスと住居、年齢を一覧表示する。ただし、次の条件を満たした形式で表示すること。
1. メールアドレスの余分な空白は除去する。
2. 住居と年齢は1つの項目とし、見出しを「属性」とする。住居は「D」が戸建てで、「C」が集合住宅を表している。年齢は年代として次のように表示する。ただし、20～50代のみ考慮すればよい。
例）50代：戸建て

```sql
SELECT TRIM(メールアドレス) AS メールアドレス,
  CASE 住居
    WHEN 'D' THEN 
      CASE
        WHEN 年齢 BETWEEN 20 AND 29 THEN '20代：戸建て'
        WHEN 年齢 BETWEEN 30 AND 39 THEN '30代：戸建て'
        WHEN 年齢 BETWEEN 40 AND 49 THEN '40代：戸建て'
        WHEN 年齢 BETWEEN 50 AND 59 THEN '50代：戸建て'
      END
    WHEN 'C' THEN 
      CASE
        WHEN 年齢 BETWEEN 20 AND 29 THEN '20代：集合住宅'
        WHEN 年齢 BETWEEN 30 AND 39 THEN '30代：集合住宅'
        WHEN 年齢 BETWEEN 40 AND 49 THEN '40代：集合住宅'
        WHEN 年齢 BETWEEN 50 AND 59 THEN '50代：集合住宅'
      END
  END AS 属性
FROM 回答者;
```

#### 正解: 7 / 不正解: 9 / 正解率: 44%